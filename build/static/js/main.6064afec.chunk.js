(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{58:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a(2),n=a.n(s),i=a(26),r=a.n(i),o=(a(58),a(11)),j=a(30),d=a(9),l=(a(59),a(93)),b=a(84),h=a(85),u=a(86),m=a(87),O=a(88),p=a(89),x=a(28),v=x.a.initializeApp({apiKey:"AIzaSyBE6xImb9MKxVEKQserZnGUlLTIExAljEs",authDomain:"whatsapp-8136c.firebaseapp.com",databaseURL:"https://whatsapp-8136c.firebaseio.com",projectId:"whatsapp-8136c",storageBucket:"whatsapp-8136c.appspot.com",messagingSenderId:"432572739628",appId:"1:432572739628:web:3bb2f05ce8a1ccd02d2189",measurementId:"G-DQ0G6CSLL9"}).firestore(),f=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,_=v,N=Object(s.createContext)(),S=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(c.jsx)(N.Provider,{value:Object(s.useReducer)(t,a),children:n})},w=function(){return Object(s.useContext)(N)};a(64);var C=function(e,t){var a=e.getHours(),c=e.getMinutes(),s=a>=12?"pm":"am",n=(a=(a%=12)||12)+":"+(c=c<10?"0"+c:c)+" "+s;return"time&date"===t?n+" "+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear():n};var y=function(){var e,t,a,n=Object(s.useState)(""),i=Object(o.a)(n,2),r=i[0],j=i[1],v=Object(s.useState)(""),f=Object(o.a)(v,2),g=f[0],N=f[1],S=Object(s.useState)(""),y=Object(o.a)(S,2),I=y[0],E=y[1],D=Object(s.useState)([]),k=Object(o.a)(D,2),A=k[0],L=k[1],B=w(),F=Object(o.a)(B,2),P=F[0].user,R=(F[1],Object(d.f)().roomId);Object(s.useEffect)((function(){j(R),R&&_.collection("rooms").doc(R).onSnapshot((function(e){return E(e.data().name)}))&&_.collection("rooms").doc(R).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return L(e.docs.map((function(e){return e.data()})))}))}),[R]);var T=new Date(null===(e=A[A.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate());return console.log(T),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat__header",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(r,".svg")}),Object(c.jsxs)("div",{className:"chat__headerInfo",children:[Object(c.jsx)("h3",{children:I}),Object(c.jsx)("p",{children:(null===(a=A[0])||void 0===a?void 0:a.message)?"Last seen ".concat(C(T,"time&date")):"Offline"})]}),Object(c.jsxs)("div",{className:"chat__headerRight",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(h.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(m.a,{})})]})]}),Object(c.jsx)("div",{className:"chat__body",children:A.map((function(e){return Object(c.jsxs)("p",{className:"chat__message ".concat(e.name===P.displayName&&"chat__receiver"),children:[Object(c.jsx)("span",{className:"chat__name",children:e.name})," ",e.message,Object(c.jsx)("span",{className:"chat__timestamp",children:C(T,"just time")})]})}))}),Object(c.jsxs)("div",{className:"chat__footer",children:[Object(c.jsx)(O.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:g,onChange:function(e){return N(e.target.value)},type:"text",placeholder:"Type a message..."}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typed >>> ",g),_.collection("rooms").doc(R).collection("messages").add({message:g,name:P.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),N("")},type:"submit",children:"Send a message"})]}),Object(c.jsx)(p.a,{})]})]})},I=a(90),E=a(40),D="SET_USER",k=function(e,t){switch(console.log(t),t.type){case D:return Object(E.a)(Object(E.a)({},e),{},{user:t.user});default:return e}};a(69);var A=function(){var e=w(),t=Object(o.a)(e,2),a=(t[0].user,t[1]);return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1021px-WhatsApp.svg.png",alt:""}),Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(c.jsx)(I.a,{onClick:function(){f.signInWithPopup(g).then((function(e){console.log(e),a({type:D,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In with Google"})]})})},L=a(91),B=a(92);a(70),a(71);var F=function(e){var t,a,n,i,r=e.id,d=e.name,b=e.addNewChat,h=Object(s.useState)(""),u=Object(o.a)(h,2),m=u[0],O=u[1],p=Object(s.useState)(""),x=Object(o.a)(p,2),v=x[0],f=x[1];Object(s.useEffect)((function(){r&&_.collection("rooms").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))}),[r]),Object(s.useEffect)((function(){O(5e3*Math.random()|0)}),[]);var g=new Date(null===(t=v[v.length-1])||void 0===t||null===(a=t.timestamp)||void 0===a?void 0:a.toDate());return b?Object(c.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&_.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(c.jsx)("h2",{children:"Add new chat"})}):Object(c.jsx)(j.b,{to:"/rooms/".concat(r),children:Object(c.jsxs)("div",{className:"sidebarChat",children:[Object(c.jsxs)("div",{className:"sidebarChat__avatar",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(m,".svg")}),Object(c.jsxs)("div",{className:"sidebarChat__info",children:[Object(c.jsx)("h2",{children:d}),Object(c.jsx)("p",{children:null===(n=v[0])||void 0===n?void 0:n.message})]})]}),Object(c.jsx)("span",{className:"sidebarChat__timestamp",children:(null===(i=v[0])||void 0===i?void 0:i.message)?C(g,"just time"):"Offline"})]})})};var P=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],i=w(),r=Object(o.a)(i,2),j=r[0].user;return r[1],Object(s.useEffect)((function(){var e=_.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){return e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(l.a,{src:null===j||void 0===j?void 0:j.photoURL}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(L.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(B.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(m.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar__search",children:Object(c.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(c.jsx)(h.a,{}),Object(c.jsx)("input",{type:"text",placeholder:"Search or start new chat"})]})}),Object(c.jsxs)("div",{className:"sidebar__chats",children:[Object(c.jsx)(F,{addNewChat:!0}),a.map((function(e){return Object(c.jsx)(F,{id:e.id,name:e.data.name},e.id)}))]})]})};var R=function(){var e=w(),t=Object(o.a)(e,2),a=t[0].user;return t[1],Object(c.jsx)("div",{className:"app",children:a?Object(c.jsx)("div",{className:"app__body",children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(P,{}),Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{path:"/rooms/:roomId",children:Object(c.jsx)(y,{})}),Object(c.jsx)(d.a,{path:"/",children:Object(c.jsx)(y,{})})]})]})}):Object(c.jsx)(A,{})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,94)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(S,{initialState:{user:null},reducer:k,children:Object(c.jsx)(R,{})})}),document.getElementById("root")),T()}},[[72,1,2]]]);
//# sourceMappingURL=main.6064afec.chunk.js.map