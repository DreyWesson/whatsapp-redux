(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{66:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(3),s=a(1),n=a.n(s),o=a(25),r=a.n(o),i=a(28),d=a(22),l=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),c(e),s(e),n(e),o(e)}))},j=a(36),u=a(8),h=(a(66),a(17)),b=a(32),m=(a(67),a(70),a(99)),O=a(90),p=a(91),f=a(92),g=a(93),v=a(94),x=a(95),_=b.a.initializeApp({apiKey:"AIzaSyBE6xImb9MKxVEKQserZnGUlLTIExAljEs",authDomain:"whatsapp-8136c.firebaseapp.com",databaseURL:"https://whatsapp-8136c.firebaseio.com",projectId:"whatsapp-8136c",storageBucket:"whatsapp-8136c.appspot.com",messagingSenderId:"432572739628",appId:"1:432572739628:web:3bb2f05ce8a1ccd02d2189",measurementId:"G-DQ0G6CSLL9"}).firestore(),S=b.a.auth(),N=new b.a.auth.GoogleAuthProvider,M=_;a(72);var y=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timeSince",s=a.getHours(),n=a.getMinutes(),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=s>=12?"pm":"am";e=(s=(s%=12)||12)+":"+(n=n<10?"0"+n:n)+i,t=o[a.getDay()];var d=r[a.getMonth()],l=function(){switch(c){case"time&date":return"".concat(e," ").concat(a.getDate()," ").concat(d,", ").concat(a.getFullYear());case"time&day&date":return"".concat(e," ").concat(t," ").concat(a.getDate()," ").concat(d,", ").concat(a.getFullYear());case"isToday":return"".concat(e," \u2022 Today");case"checkIfToday":return"".concat(a.getDate(),"\u2022").concat(d,"\u2022").concat(a.getFullYear());case"longTime":return"".concat(t," ").concat(a.getDate()," ").concat(d,", ").concat(a.getFullYear());default:return j(a)}};function j(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;return a>=1?Math.floor(a)>1?Math.floor(a)+" years ago":Math.floor(a)+" year ago":(a=t/2592e3)>=1?Math.floor(a)>1?Math.floor(a)+" months ago":Math.floor(a)+" month ago":(a=t/86400)>=1?Math.floor(a)>1?Math.floor(a)+" days ago":Math.floor(a)+" day ago":(a=t/3600)>=1?Math.floor(a)>1?Math.floor(a)+" hours ago":Math.floor(a)+" hour ago":(a=t/60)>=1?Math.floor(a)>1?Math.floor(a)+" minutes ago":Math.floor(a)+" minute ago":Math.floor(a)>1?Math.floor(t)+" seconds ago":Math.floor(t)+" second ago"}return l()};var w=function(){var e,t,a,n=Object(s.useState)(""),o=Object(h.a)(n,2),r=o[0],i=o[1],l=Object(s.useState)(""),j=Object(h.a)(l,2),_=j[0],S=j[1],N=Object(s.useState)(""),w=Object(h.a)(N,2),C=w[0],D=w[1],I=Object(s.useState)([]),T=Object(h.a)(I,2),E=T[0],R=T[1],A=Object(u.f)().roomId,F=Object(d.c)((function(e){var t=e.userReducer,a=e.messageReducer;return{user:t.user,message:a.message}})),k=F.user,L=F.message;console.log("messages \ud83d\udd4a",L),console.log("user \ud83d\udc68 ",k),Object(s.useEffect)((function(){i(A),A&&M.collection("rooms").doc(A).onSnapshot((function(e){return D(e.data().name)}))&&M.collection("rooms").doc(A).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return R(e.docs.map((function(e){return e.data()})))}))}),[A]);var B=new Date(null===(e=E[E.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate());return Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat__header",children:[Object(c.jsx)(m.a,{src:"https://avatars.dicebear.com/api/human/".concat(r,".svg")}),Object(c.jsxs)("div",{className:"chat__headerInfo",children:[Object(c.jsx)("h3",{children:C}),Object(c.jsx)("p",{children:(null===(a=E[0])||void 0===a?void 0:a.message)?"Last seen ".concat(y(B,"time&date")):"Offline"})]}),Object(c.jsxs)("div",{className:"chat__headerRight",children:[Object(c.jsx)(O.a,{children:Object(c.jsx)(p.a,{})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(f.a,{})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(g.a,{})})]})]}),Object(c.jsx)("div",{className:"chat__body",children:E.map((function(e){return Object(c.jsxs)("p",{className:"chat__message ".concat(e.name===k.displayName&&"chat__receiver"),children:[Object(c.jsx)("span",{className:"chat__name",children:e.name})," ",e.message,Object(c.jsx)("span",{className:"chat__timestamp",children:y(B)})]})}))}),Object(c.jsxs)("div",{className:"chat__footer",children:[Object(c.jsx)(v.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:_,onChange:function(e){return S(e.target.value)},type:"text",placeholder:"Type a message..."}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typed >>> ",_),M.collection("rooms").doc(A).collection("messages").add({message:_,name:k.displayName,timestamp:b.a.firestore.FieldValue.serverTimestamp()}),S("")},type:"submit",children:"Send a message"})]}),Object(c.jsx)(x.a,{})]})]})},C=a(96),D="SET_USER",I="SET_MSG";a(74);var T=function(){var e=Object(d.b)();return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1021px-WhatsApp.svg.png",alt:""}),Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(c.jsx)(C.a,{onClick:function(){S.signInWithPopup(N).then((function(t){return e(function(e){return function(t,a){return t({type:D,user:e.user})}}(t))})).catch((function(e){return alert(e.message)}))},children:"Sign In with Google"})]})})},E=a(97),R=a(98);a(75);var A=function(e){var t,a,n,o,r=e.id,i=e.name,d=e.addNewChat,l=Object(s.useState)(""),u=Object(h.a)(l,2),b=u[0],O=u[1],p=Object(s.useState)(""),f=Object(h.a)(p,2),g=f[0],v=f[1];Object(s.useEffect)((function(){r&&M.collection("rooms").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return v(e.docs.map((function(e){return e.data()})))}))}),[r]),Object(s.useEffect)((function(){O(5e3*Math.random()|0)}),[]);var x=new Date(null===(t=g[g.length-1])||void 0===t||null===(a=t.timestamp)||void 0===a?void 0:a.toDate());return d?Object(c.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&M.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(c.jsx)("h2",{children:"Add new chat"})}):Object(c.jsx)(j.b,{to:"/rooms/".concat(r),children:Object(c.jsxs)("div",{className:"sidebarChat",children:[Object(c.jsxs)("div",{className:"sidebarChat__avatar",children:[Object(c.jsx)(m.a,{src:"https://avatars.dicebear.com/api/human/".concat(b,".svg")}),Object(c.jsxs)("div",{className:"sidebarChat__info",children:[Object(c.jsx)("h2",{children:i}),Object(c.jsx)("p",{children:null===(n=g[0])||void 0===n?void 0:n.message})]})]}),Object(c.jsx)("span",{className:"sidebarChat__timestamp",children:(null===(o=g[0])||void 0===o?void 0:o.message)?y(x,"just time"):"Offline"})]})})};a(76);var F=function(){var e=Object(s.useState)([]),t=Object(h.a)(e,2),a=t[0],n=t[1],o=Object(d.c)((function(e){return e.userReducer})).user;return Object(s.useEffect)((function(){var e=M.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){return e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(m.a,{src:null===o||void 0===o?void 0:o.photoURL}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsx)(O.a,{children:Object(c.jsx)(E.a,{})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(R.a,{})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(g.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar__search",children:Object(c.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(c.jsx)(p.a,{}),Object(c.jsx)("input",{type:"text",placeholder:"Search or start new chat"})]})}),Object(c.jsxs)("div",{className:"sidebar__chats",children:[Object(c.jsx)(A,{addNewChat:!0}),a.map((function(e){return Object(c.jsx)(A,{id:e.id,name:e.data.name},e.id)}))]})]})};var k=function(){var e=Object(d.c)((function(e){return e.userReducer})).user;return Object(c.jsx)("div",{className:"app",children:e?Object(c.jsx)("div",{className:"app__body",children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(F,{}),Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{path:"/rooms/:roomId",children:Object(c.jsx)(w,{})}),Object(c.jsx)(u.a,{path:"/",children:Object(c.jsx)(w,{})})]})]})}):Object(c.jsx)(T,{})})},L=a(33),B={message:"refree"},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case I:return Object(L.a)(Object(L.a)({},e),{},{message:t.message});default:return e}},J={user:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case D:return Object(L.a)(Object(L.a)({},e),{},{user:t.user});default:return e}},W=Object(i.c)({userReducer:P,messageReducer:G}),Y=(a(77),a(49)),U=Object(i.d)(W,Object(i.a)(Y.a));console.log("List of Reducers Stored in STATE \ud83d\udc49",U.getState()),r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(d.a,{store:U,children:Object(c.jsx)(k,{})})}),document.getElementById("root")),l()}},[[78,1,2]]]);
//# sourceMappingURL=main.624401e5.chunk.js.map